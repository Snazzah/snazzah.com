{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://snazzah.com/steemcord-schema/2.json",
  "title": "Metadata",
  "type": "object",
  "description": "Metadata that describes a presence.",
  "definitions": {
    "user": {
      "type": "object",
      "description": "User information.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the user."
        },
        "avatar": {
          "type": "string",
          "description": "The URL of the user's avatar.",
          "pattern": "^https?:\\/\\/?(?:[a-z0-9-]+\\.)*[0-9a-z_-]+(?:\\.[a-z]+)+\\/.*$"
        },
        "url": {
          "type": "string",
          "description": "The user's website.",
          "pattern": "^https?:\\/\\/?(?:[a-z0-9-]+\\.)*[0-9a-z_-]+(?:\\.[a-z]+)+\\/.*$"
        },
        "github": {
          "type": "string",
          "description": "The user's github username.",
          "pattern": "^\\w+$"
        }
      },
      "additionalProperties": false,
      "required": [
        "name"
      ]
    }
  },
  "properties": {
    "$schema": {
      "$comment": "This is required otherwise the schema will fail itself when it is applied to a document via $schema. This is optional so that validators that use this schema don't fail if the metadata doesn't have the $schema property.",
      "type": "string",
      "description": "The metadata schema URL."
    },
    "app_id": {
      "type": "integer",
      "description": "The ID of the app that this presence is using.",
      "minimum": 1
    },
    "version": {
      "type": "string",
      "description": "The SemVer version of the presence. Must just be major.minor.patch.",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "name": {
      "type": "string",
      "description": "The name of the app that this presence is for."
    },
    "altnames": {
      "type": "array",
      "description": "Alternative names for the service.",
      "items": {
        "type": "string",
        "description": "An alternative name."
      },
      "minItems": 1
    },
    "description": {
      "type": "string",
      "description": "The description of the presence."
    },
    "author": {
      "$ref": "#/definitions/user",
      "description": "The author of this presence."
    },
    "contributors": {
      "type": "array",
      "description": "Any extra contributors to this presence.",
      "items": {
        "$ref": "#/definitions/user"
      }
    },
    "icon": {
      "type": "string",
      "description": "The icon of the app.",
      "pattern": "^https?:\\/\\/?(?:[a-z0-9-]+\\.)*[0-9a-z_-]+(?:\\.[a-z]+)+\\/.*$"
    },
    "settings": {
      "type": "array",
      "description": "The settings for the presence.",
      "minItems": 1,
      "uniqueItems": true,
      "items": {
        "anyOf": [{
            "type": "object",
            "description": "A text setting.",
            "required": [
              "key",
              "type",
              "title",
              "note",
              "default"
            ],
            "properties": {
              "type": {
                "type": "string",
                "enum": ["text"]
              },
              "key": {
                "type": "string",
                "description": "The key of the setting.",
                "pattern": "^[a-zA-Z0-9_]+$"
              },
              "title": {
                "type": "string",
                "description": "The title of the setting.",
                "maxLength": 256
              },
              "note": {
                "type": "string",
                "description": "The subtitle of the setting.",
                "maxLength": 1024
              },
              "placeholder": {
                "type": "string",
                "description": "The placeholder of the string input.",
                "maxLength": 256
              },
              "max_length": {
                "type": "number",
                "description": "The maximum length of the text field."
              },
              "default": {
                "type": "string",
                "description": "The default value of the setting."
              }
            },
            "additionalProperties": false
          },
          {
            "type": "object",
            "description": "A number setting.",
            "required": [
              "key",
              "type",
              "title",
              "note",
              "default"
            ],
            "properties": {
              "type": {
                "type": "string",
                "enum": ["number"]
              },
              "key": {
                "type": "string",
                "description": "The key of the setting.",
                "pattern": "^[a-zA-Z0-9_]+$"
              },
              "title": {
                "type": "string",
                "description": "The title of the setting.",
                "maxLength": 256
              },
              "note": {
                "type": "string",
                "description": "The subtitle of the setting.",
                "maxLength": 1024
              },
              "default": {
                "type": "integer",
                "description": "The default value of the setting."
              },
              "min": {
                "type": "integer",
                "description": "The minimum number the setting can go to."
              },
              "max": {
                "type": "integer",
                "description": "The maximum number the setting can go to."
              }
            },
            "additionalProperties": false
          },
          {
            "type": "object",
            "description": "A checkbox setting.",
            "required": [
              "key",
              "type",
              "title",
              "note",
              "default"
            ],
            "properties": {
              "type": {
                "type": "string",
                "enum": ["checkbox"]
              },
              "key": {
                "type": "string",
                "description": "The key of the setting.",
                "pattern": "^[a-zA-Z0-9_]+$"
              },
              "title": {
                "type": "string",
                "description": "The title of the setting.",
                "maxLength": 256
              },
              "note": {
                "type": "string",
                "description": "The subtitle of the setting.",
                "maxLength": 1024
              },
              "default": {
                "type": "boolean",
                "description": "The default value of the setting."
              }
            },
            "additionalProperties": false
          },
          {
            "type": "object",
            "description": "A dropdown setting.",
            "required": [
              "key",
              "type",
              "title",
              "note",
              "default",
              "values"
            ],
            "properties": {
              "type": {
                "type": "string",
                "enum": ["dropdown"]
              },
              "key": {
                "type": "string",
                "description": "The key of the setting.",
                "pattern": "^[a-zA-Z0-9_]+$"
              },
              "title": {
                "type": "string",
                "description": "The title of the setting.",
                "maxLength": 256
              },
              "note": {
                "type": "string",
                "description": "The subtitle of the setting.",
                "maxLength": 1024
              },
              "default": {
                "type": "integer",
                "description": "The default value of the setting. (Index of the values)",
                "minimum": 0
              },
              "values": {
                "type": "array",
                "description": "The settings for the presence.",
                "minItems": 1,
                "uniqueItems": true,
                "items": { "type": "string" }
              }
            },
            "additionalProperties": false
          }
        ]
      }
    },
    "update_url": {
      "type": "string",
      "description": "The URL to this metadata for update capabilities.",
      "pattern": "^https?:\\/\\/?(?:[a-z0-9-]+\\.)*[0-9a-z_-]+(?:\\.[a-z]+)+\\/.*$"
    },
    "script_url": {
      "type": "string",
      "description": "The URL to the module for this metadata. (index.ts)",
      "pattern": "^https?:\\/\\/?(?:[a-z0-9-]+\\.)*[0-9a-z_-]+(?:\\.[a-z]+)+\\/.*$"
    }
  },
  "additionalProperties": false,
  "required": [
    "app_id",
    "author",
    "name",
    "version"
  ]
}